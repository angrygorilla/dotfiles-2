- defaults:
    link:
      relink: true

- clean: ['~']

- shell:
    - command: git submodule update --init --recursive
      description: Install submodules
    - command: sudo apt update -qq ; sudo apt install dconf-cli zsh -yy -qq
      description: Install packages
    - command: command -v tilix >/dev/null 2>&1 && dconf load /com/gexperts/Tilix/ < config/tilix
      description: Restore Tilix configuration

- link:
    ~/.dotfiles: ''

    # vim stuff
    ~/.vim: vim
    ~/.vimrc: vimrc

    # git stuff
    ~/.gitignore: gitignore
    ~/.gitconfig: gitconfig
    ~/.gitprompt: dependencies/bash-git-prompt/gitprompt.sh

    # bash stuff
    ~/.bashrc: bash_rc
    ~/.bash_profile: bash_profile
    ~/.bash_exports: bash/exports.sh
    ~/.bash_aliases: bash/aliases.sh
    ~/.bash_functions: bash/fn.sh
    ~/.bash_completion: bash/completion.sh

    # zsh stuff
    ~/.zshrc: zshrc

    # fzf
    ~/.fzf: dependencies/fzf

    # wakatime
    ~/.bash_wakatime: dependencies/bash-wakatime/bash-wakatime.sh

    # custom application configuration
    ~/.config/tilix.conf: config/tilix
    ~/.config/terminator/config:
        create: true
        path: config/terminator

- shell:
    # has to come after zsh or bashrc are sourced, because
    # it overwrites those files.
    - command: ./dependencies/fzf/install --all
      description: Install fzf
